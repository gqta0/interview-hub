<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JVM Internals - Java Core Interview</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="bg-animation"></div>

    <nav class="top-nav">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo"><i class="fas fa-rocket"></i><span>Interview Hub</span></a>
            <a href="../index.html#java" class="nav-back"><i class="fas fa-arrow-left"></i> Java Core</a>
        </div>
    </nav>

    <header class="topic-header">
        <div class="topic-icon java"><i class="fas fa-microchip"></i></div>
        <div class="topic-info">
            <span class="topic-category">Java Core</span>
            <h1>JVM Internals</h1>
            <p class="topic-desc">Memory model, Garbage Collection, Class Loading, JIT Compilation</p>
        </div>
    </header>

    <main class="content-container">
        <aside class="toc">
            <h3><i class="fas fa-list"></i> Ná»™i dung</h3>
            <ul>
                <li><a href="#architecture">JVM Architecture</a></li>
                <li><a href="#classloading">Class Loading</a></li>
                <li><a href="#memory">Memory Model</a></li>
                <li><a href="#heap">Heap Structure</a></li>
                <li><a href="#gc">Garbage Collection</a></li>
                <li><a href="#gc-types">GC Algorithms</a></li>
                <li><a href="#jit">JIT Compilation</a></li>
                <li><a href="#tuning">JVM Tuning</a></li>
                <li><a href="#interview">CÃ¢u há»i phá»ng váº¥n</a></li>
            </ul>
        </aside>

        <article class="main-content">
            <!-- JVM ARCHITECTURE -->
            <section class="content-section">
                <h2 id="architecture" class="section-title"><span class="section-icon">ğŸ—ï¸</span>JVM Architecture</h2>

                <div class="concept-card">
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Diagram</span></div>
                            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        JVM                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               Class Loader Subsystem                 â”‚    â”‚
â”‚  â”‚   Loading â†’ Linking â†’ Initialization                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               Runtime Data Areas                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Method   â”‚ â”‚  Heap   â”‚ â”‚ Stack  â”‚ â”‚    PC    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚   Area    â”‚ â”‚(Objects)â”‚ â”‚(Thread)â”‚ â”‚ Register â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚    â”‚
â”‚  â”‚              â”‚ Native Method    â”‚                    â”‚    â”‚
â”‚  â”‚              â”‚     Stack        â”‚                    â”‚    â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               Execution Engine                       â”‚    â”‚
â”‚  â”‚   Interpreter â†’ JIT Compiler â†’ Garbage Collector     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           Native Method Interface (JNI)              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CLASS LOADING -->
            <section class="content-section">
                <h2 id="classloading" class="section-title"><span class="section-icon">ğŸ“¦</span>Class Loading</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Class Loader Hierarchy</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Hierarchy</span></div>
                            <pre><code>         Bootstrap ClassLoader (null)
              loads rt.jar, core Java classes
                        â”‚
                        â–¼
         Extension ClassLoader (Platform)
              loads jre/lib/ext/*.jar
                        â”‚
                        â–¼
         Application ClassLoader (System)
              loads classpath (your code)
                        â”‚
                        â–¼
         Custom ClassLoaders
              vÃ­ dá»¥: URLClassLoader, WebAppClassLoader</code></pre>
                        </div>

                        <div class="key-points">
                            <h4><i class="fas fa-key"></i> Class Loading Process</h4>
                            <ul>
                                <li><strong>Loading:</strong> Äá»c .class file, táº¡o Class object trong memory</li>
                                <li><strong>Linking:</strong>
                                    <ul>
                                        <li><em>Verification:</em> Kiá»ƒm tra bytecode há»£p lá»‡</li>
                                        <li><em>Preparation:</em> Cáº¥p phÃ¡t memory cho static fields (default values)
                                        </li>
                                        <li><em>Resolution:</em> Symbolic references â†’ direct references</li>
                                    </ul>
                                </li>
                                <li><strong>Initialization:</strong> Cháº¡y static initializers vÃ  khá»‘i static</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">Delegation Model</span></div>
                            <pre><code class="language-java">// Parent-first delegation model
protected Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException {
    // 1. Check if already loaded
    Class&lt;?&gt; c = findLoadedClass(name);
    
    if (c == null) {
        try {
            // 2. Delegate to parent first
            if (parent != null) {
                c = parent.loadClass(name);
            } else {
                c = findBootstrapClassOrNull(name);
            }
        } catch (ClassNotFoundException e) {
            // 3. Only if parent can't load, try self
            c = findClass(name);
        }
    }
    return c;
}

// Kiá»ƒm tra class loader
String.class.getClassLoader();  // null (Bootstrap)
ArrayList.class.getClassLoader();  // null (Bootstrap)
MyClass.class.getClassLoader();  // AppClassLoader</code></pre>
                        </div>

                        <div class="warning-box">
                            <h4><i class="fas fa-exclamation-triangle"></i> ClassLoader Issues</h4>
                            <ul>
                                <li><strong>ClassNotFoundException:</strong> Class khÃ´ng tÃ¬m tháº¥y trong classpath</li>
                                <li><strong>NoClassDefFoundError:</strong> Class cÃ³ lÃºc compile nhÆ°ng khÃ´ng cÃ³ lÃºc
                                    runtime</li>
                                <li><strong>ClassCastException:</strong> CÃ¹ng class nhÆ°ng load bá»Ÿi khÃ¡c loaders</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MEMORY MODEL -->
            <section class="content-section">
                <h2 id="memory" class="section-title"><span class="section-icon">ğŸ§ </span>Memory Model</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Memory Areas</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Area</th>
                                        <th>Scope</th>
                                        <th>LÆ°u trá»¯</th>
                                        <th>Error</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Heap</strong></td>
                                        <td>Shared (táº¥t cáº£ threads)</td>
                                        <td>Objects, instance variables, arrays</td>
                                        <td>OutOfMemoryError: Java heap space</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Stack</strong></td>
                                        <td>Per thread</td>
                                        <td>Local variables, method calls, frames</td>
                                        <td>StackOverflowError</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Metaspace</strong></td>
                                        <td>Shared</td>
                                        <td>Class metadata, method bytecode</td>
                                        <td>OutOfMemoryError: Metaspace</td>
                                    </tr>
                                    <tr>
                                        <td><strong>PC Register</strong></td>
                                        <td>Per thread</td>
                                        <td>Äá»‹a chá»‰ instruction hiá»‡n táº¡i</td>
                                        <td>-</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Native Stack</strong></td>
                                        <td>Per thread</td>
                                        <td>Native method calls (JNI)</td>
                                        <td>StackOverflowError</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Heap vs
                                    Stack Example</span></div>
                            <pre><code class="language-java">public class MemoryExample {
    // Instance variable â†’ HEAP
    private String name;
    
    // Static variable â†’ METASPACE (class metadata)
    private static int count;
    
    public void compute(int x) {
        // Parameter 'x' â†’ STACK (local variable)
        // Reference 'list' â†’ STACK
        // ArrayList object â†’ HEAP
        List&lt;String&gt; list = new ArrayList&lt;&gt;();
        
        // Primitive â†’ STACK
        int result = x * 2;
        
        // String literals â†’ String Pool (part of Heap)
        String literal = "hello";
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- HEAP STRUCTURE -->
            <section class="content-section">
                <h2 id="heap" class="section-title"><span class="section-icon">ğŸ“Š</span>Heap Structure</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Generational Heap</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Diagram</span></div>
                            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          HEAP                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚         Young Generation            â”‚ â”‚Old Generation â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  (Tenured)    â”‚ â”‚
â”‚ â”‚ â”‚  Eden   â”‚ â”‚   S0   â”‚ â”‚   S1   â”‚   â”‚ â”‚               â”‚ â”‚
â”‚ â”‚ â”‚         â”‚ â”‚(from)  â”‚ â”‚ (to)   â”‚   â”‚ â”‚  Long-lived   â”‚ â”‚
â”‚ â”‚ â”‚ New     â”‚ â”‚Survivorâ”‚ â”‚Survivorâ”‚   â”‚ â”‚   objects     â”‚ â”‚
â”‚ â”‚ â”‚ objects â”‚ â”‚        â”‚ â”‚        â”‚   â”‚ â”‚               â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        ~1/3 of heap                      ~2/3 of heap     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Object lifecycle:
1. Object táº¡o trong Eden
2. Minor GC â†’ Surviving objects â†’ S0 (age+1)
3. Next Minor GC â†’ Eden + S0 survivors â†’ S1 (age+1)
4. Objects vá»›i age > threshold â†’ Old Gen (promoted)
5. Major GC (Full GC) clean Old Gen</code></pre>
                        </div>

                        <div class="key-points">
                            <h4><i class="fas fa-key"></i> Generational Hypothesis</h4>
                            <ul>
                                <li><strong>Weak generational hypothesis:</strong> Most objects die young</li>
                                <li><strong>Young Gen:</strong> Minor GC (nhanh, frequent) - Stop-the-world ngáº¯n</li>
                                <li><strong>Old Gen:</strong> Major GC (cháº­m, Ã­t frequent) - Stop-the-world dÃ i</li>
                                <li><strong>Default ratio:</strong> Young:Old = 1:2</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Bash</span><span class="code-title">JVM
                                    Memory Parameters</span></div>
                            <pre><code class="language-bash"># Heap size
-Xms512m        # Initial heap size
-Xmx2g          # Maximum heap size

# Young generation
-Xmn256m        # Young generation size
-XX:NewRatio=2  # Young:Old = 1:2

# Survivor ratio
-XX:SurvivorRatio=8  # Eden:Survivor = 8:1:1

# Metaspace
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m

# Stack size
-Xss1m          # Thread stack size</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GARBAGE COLLECTION -->
            <section class="content-section">
                <h2 id="gc" class="section-title"><span class="section-icon">ğŸ—‘ï¸</span>Garbage Collection</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>GC Basics</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="key-points">
                            <h4><i class="fas fa-key"></i> GC Concepts</h4>
                            <ul>
                                <li><strong>Reachability:</strong> Object reachable tá»« GC Roots (stack, static refs) â†’
                                    live</li>
                                <li><strong>Mark-Sweep:</strong> Mark live objects â†’ Sweep unreachable</li>
                                <li><strong>Compaction:</strong> Move objects Ä‘á»ƒ eliminate fragmentation</li>
                                <li><strong>Stop-the-world:</strong> Pause application threads during GC</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Diagram</span></div>
                            <pre><code>GC Roots:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Stack variables (local, parameters)               â”‚
â”‚ â€¢ Static variables                                  â”‚
â”‚ â€¢ JNI references                                    â”‚
â”‚ â€¢ Thread objects                                    â”‚
â”‚ â€¢ Classes loaded by system class loader             â”‚
â”‚ â€¢ Monitor objects (synchronized)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            Object Graph Traversal
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼               â–¼
  [LIVE]         [LIVE]       [UNREACHABLE]
    â”‚                               â”‚
    â–¼                               â–¼
  KEEP                           COLLECT</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Memory
                                    Leak Example</span></div>
                            <pre><code class="language-java">// âŒ Memory Leak: collection grows forever
class Cache {
    private static List&lt;Object&gt; cache = new ArrayList&lt;&gt;();
    
    public void add(Object obj) {
        cache.add(obj);  // Never removed!
    }
}

// âŒ Memory Leak: listener not removed
class EventSource {
    List&lt;Listener&gt; listeners = new ArrayList&lt;&gt;();
    
    public void addListener(Listener l) {
        listeners.add(l);
    }
    // Missing removeListener()!
}

// âœ… Fix: Use WeakReference
Map&lt;Key, WeakReference&lt;Value&gt;&gt; cache = new WeakHashMap&lt;&gt;();</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GC ALGORITHMS -->
            <section class="content-section">
                <h2 id="gc-types" class="section-title"><span class="section-icon">âš™ï¸</span>GC Algorithms</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Garbage Collectors</h3>
                        <span class="badge important">Important</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>GC</th>
                                        <th>Algorithm</th>
                                        <th>Pause</th>
                                        <th>Use Case</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Serial GC</strong></td>
                                        <td>Mark-Sweep-Compact</td>
                                        <td>Long</td>
                                        <td>Single CPU, small heap</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Parallel GC</strong></td>
                                        <td>Mark-Sweep-Compact (parallel)</td>
                                        <td>Medium</td>
                                        <td>Throughput priority</td>
                                    </tr>
                                    <tr>
                                        <td><strong>CMS</strong></td>
                                        <td>Concurrent Mark-Sweep</td>
                                        <td>Short</td>
                                        <td>Deprecated (Java 9)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>G1 GC</strong></td>
                                        <td>Region-based</td>
                                        <td>Predictable</td>
                                        <td>Default (Java 9+)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>ZGC</strong></td>
                                        <td>Concurrent, Region-based</td>
                                        <td>&lt;10ms</td>
                                        <td>Ultra-low latency</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Shenandoah</strong></td>
                                        <td>Concurrent compaction</td>
                                        <td>Consistent low</td>
                                        <td>Low latency</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Bash</span><span class="code-title">GC
                                    Selection</span></div>
                            <pre><code class="language-bash"># Serial GC
-XX:+UseSerialGC

# Parallel GC (throughput)
-XX:+UseParallelGC

# G1 GC (default Java 9+)
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200  # Target pause time

# ZGC (Java 11+)
-XX:+UseZGC

# Shenandoah (Java 12+)
-XX:+UseShenandoahGC

# GC Logging
-Xlog:gc*:file=gc.log:time,uptime:filecount=5,filesize=10M</code></pre>
                        </div>

                        <div class="info-box">
                            <h4><i class="fas fa-lightbulb"></i> G1 GC (Garbage First)</h4>
                            <ul>
                                <li>Chia heap thÃ nh regions (~2000 regions)</li>
                                <li>Thu gom region cÃ³ nhiá»u garbage nháº¥t trÆ°á»›c</li>
                                <li>Predictable pause times vá»›i -XX:MaxGCPauseMillis</li>
                                <li>Concurrent marking, parallel collection</li>
                            </ul>
                        </div>

                        <div class="info-box">
                            <h4><i class="fas fa-rocket"></i> ZGC (Z Garbage Collector)</h4>
                            <ul>
                                <li>Pause times &lt; 10ms (thÆ°á»ng &lt; 1ms)</li>
                                <li>Scales tá»« 8MB Ä‘áº¿n 16TB heap</li>
                                <li>Concurrent marking, relocation, reference processing</li>
                                <li>Colored pointers + load barriers</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- JIT COMPILATION -->
            <section class="content-section">
                <h2 id="jit" class="section-title"><span class="section-icon">ğŸš€</span>JIT Compilation</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Just-In-Time Compiler</h3>
                        <span class="badge important">Important</span>
                    </div>
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Diagram</span></div>
                            <pre><code>Bytecode Execution Flow:

.java â†’ javac â†’ .class (bytecode) â†’ JVM

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JVM                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           Interpreter                    â”‚    â”‚
â”‚  â”‚  (cháº­m, cháº¡y bytecode trá»±c tiáº¿p)         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚ hot code detected          â”‚
â”‚                     â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           JIT Compiler                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚    â”‚
â”‚  â”‚  â”‚   C1    â”‚  â”€â”€â”€â”€â”€> â”‚   C2    â”‚        â”‚    â”‚
â”‚  â”‚  â”‚ (fast)  â”‚         â”‚(optimal)â”‚        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚                            â”‚
â”‚                     â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Native Machine Code              â”‚    â”‚
â”‚  â”‚    (nhanh, cháº¡y trá»±c tiáº¿p trÃªn CPU)      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
                        </div>

                        <div class="key-points">
                            <h4><i class="fas fa-key"></i> Tiered Compilation (Default)</h4>
                            <ul>
                                <li><strong>Level 0:</strong> Interpreter</li>
                                <li><strong>Level 1-3:</strong> C1 compiler (fast compile, some optimization)</li>
                                <li><strong>Level 4:</strong> C2 compiler (slow compile, full optimization)</li>
                                <li><strong>Hot methods:</strong> Methods gá»i nhiá»u láº§n â†’ compile lÃªn native code</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">JIT
                                    Optimizations</span></div>
                            <pre><code class="language-java">// 1. Inlining - trÃ¡nh method call overhead
// Compiler thay tháº¿ call báº±ng code trá»±c tiáº¿p
int result = add(a, b);  // â†’ int result = a + b;

// 2. Dead code elimination
if (false) {
    doSomething();  // Removed
}

// 3. Loop unrolling
for (int i = 0; i < 4; i++) {
    process(i);
}
// â†’ process(0); process(1); process(2); process(3);

// 4. Escape analysis
void compute() {
    Point p = new Point(1, 2);  // Object doesn't escape
    return p.x + p.y;
}
// â†’ Allocate on stack instead of heap (scalar replacement)</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Bash</span><span class="code-title">JIT
                                    Tuning</span></div>
                            <pre><code class="language-bash"># Disable tiered compilation (C2 only)
-XX:-TieredCompilation

# Compile threshold (iterations before compiling)
-XX:CompileThreshold=10000

# Print compilation
-XX:+PrintCompilation

# Disable specific optimization (debugging)
-XX:+UnlockDiagnosticVMOptions
-XX:-DoEscapeAnalysis</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- JVM TUNING -->
            <section class="content-section">
                <h2 id="tuning" class="section-title"><span class="section-icon">ğŸ”§</span>JVM Tuning</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Performance Tuning</h3>
                        <span class="badge advanced">Advanced</span>
                    </div>
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Bash</span><span class="code-title">Common
                                    JVM Options</span></div>
                            <pre><code class="language-bash"># Memory settings
-Xms4g -Xmx4g           # Set min = max to avoid resize
-XX:MaxMetaspaceSize=512m

# GC for web applications (low latency)
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m

# GC for batch processing (throughput)
-XX:+UseParallelGC
-XX:ParallelGCThreads=8

# Diagnostics
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/path/to/dump
-XX:OnOutOfMemoryError="kill -9 %p"

# JFR (Java Flight Recorder)
-XX:StartFlightRecording=duration=60s,filename=recording.jfr</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Bash</span><span
                                    class="code-title">Monitoring & Debugging</span></div>
                            <pre><code class="language-bash"># JVM process info
jps -lv

# Thread dump
jstack &lt;pid&gt;

# Heap dump
jmap -dump:format=b,file=heap.hprof &lt;pid&gt;

# GC statistics
jstat -gcutil &lt;pid&gt; 1000 10

# Native memory tracking
-XX:NativeMemoryTracking=summary
jcmd &lt;pid&gt; VM.native_memory summary

# JFR recording
jcmd &lt;pid&gt; JFR.start duration=60s filename=recording.jfr
jcmd &lt;pid&gt; JFR.dump filename=recording.jfr</code></pre>
                        </div>

                        <div class="warning-box">
                            <h4><i class="fas fa-exclamation-triangle"></i> Common Memory Issues</h4>
                            <ul>
                                <li><strong>OOM: Java heap space:</strong> TÄƒng -Xmx hoáº·c fix memory leak</li>
                                <li><strong>OOM: Metaspace:</strong> TÄƒng -XX:MaxMetaspaceSize (class loading issue)
                                </li>
                                <li><strong>OOM: GC overhead limit:</strong> GC cháº¡y >98% time, thu <2% memory</li>
                                <li><strong>StackOverflowError:</strong> Recursion quÃ¡ sÃ¢u, tÄƒng -Xss</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INTERVIEW QUESTIONS -->
            <section id="interview" class="content-section">
                <h2 class="section-title"><span class="section-icon">ğŸ’¼</span>CÃ¢u Há»i Phá»ng Váº¥n</h2>

                <div class="interview-questions">
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q1</span>
                            <p>JVM Memory Model cÃ³ nhá»¯ng vÃ¹ng nÃ o?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>Heap:</strong> Objects, shared giá»¯a threads</li>
                                <li><strong>Stack:</strong> Local variables, method calls, per thread</li>
                                <li><strong>Metaspace:</strong> Class metadata (thay PermGen tá»« Java 8)</li>
                                <li><strong>PC Register:</strong> Instruction pointer, per thread</li>
                                <li><strong>Native Stack:</strong> Native method calls</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q2</span>
                            <p>Sá»± khÃ¡c biá»‡t giá»¯a Stack vÃ  Heap?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>Stack:</strong> Per thread, LIFO, local vars, method frames, fast access,
                                    StackOverflowError</li>
                                <li><strong>Heap:</strong> Shared, objects/arrays, GC managed, slower access,
                                    OutOfMemoryError</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q3</span>
                            <p>Generational GC lÃ  gÃ¬?</p>
                        </div>
                        <div class="answer">
                            <p>Heap chia thÃ nh Young Gen (Eden + Survivors) vÃ  Old Gen. Dá»±a trÃªn "weak generational
                                hypothesis" - háº§u háº¿t objects die young. Young Gen cÃ³ Minor GC (nhanh, frequent). Old
                                Gen cÃ³ Major GC (cháº­m, Ã­t frequent).</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q4</span>
                            <p>G1 GC hoáº¡t Ä‘á»™ng tháº¿ nÃ o?</p>
                        </div>
                        <div class="answer">
                            <p>Chia heap thÃ nh regions (~2000). Thu gom region cÃ³ nhiá»u garbage nháº¥t trÆ°á»›c (Garbage
                                First). Concurrent marking + parallel collection. Predictable pause times vá»›i
                                -XX:MaxGCPauseMillis.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q5</span>
                            <p>Class Loader Delegation Model lÃ  gÃ¬?</p>
                        </div>
                        <div class="answer">
                            <p>Parent-first delegation: ClassLoader há»i parent trÆ°á»›c khi tá»± load. Bootstrap â†’ Extension
                                â†’ Application â†’ Custom. Äáº£m báº£o core classes (java.lang.*) khÃ´ng bá»‹ override.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q6</span>
                            <p>JIT Compilation lÃ  gÃ¬?</p>
                        </div>
                        <div class="answer">
                            <p>Just-In-Time Compiler chuyá»ƒn hot bytecode thÃ nh native machine code at runtime. Tiered
                                compilation: Interpreter â†’ C1 (fast compile) â†’ C2 (optimized). Optimizations: inlining,
                                escape analysis, loop unrolling.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q7</span>
                            <p>Memory leak trong Java cÃ³ khÃ´ng? VÃ­ dá»¥?</p>
                        </div>
                        <div class="answer">
                            <p>CÃ³! KhÃ´ng pháº£i C-style leak nhÆ°ng objects váº«n reachable mÃ  khÃ´ng cáº§n. VÃ­ dá»¥: static
                                collections grow forever, listener khÃ´ng remove, ThreadLocal khÃ´ng clear, unclosed
                                resources.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q8</span>
                            <p>KhÃ¡c biá»‡t giá»¯a Minor GC vÃ  Major GC?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>Minor GC:</strong> Young Gen only, nhanh (~ms), frequent, short pause</li>
                                <li><strong>Major GC (Full GC):</strong> Cáº£ Young + Old, cháº­m hÆ¡n, Ã­t frequent, longer
                                    pause</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q9</span>
                            <p>ZGC vs G1 GC?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>G1:</strong> Pause ~200ms (configurable), good default, most workloads</li>
                                <li><strong>ZGC:</strong> Pause &lt;10ms (often &lt;1ms), up to 16TB heap, ultra-low
                                    latency apps</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q10</span>
                            <p>LÃ m sao debug memory issues?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>jmap:</strong> Heap dump</li>
                                <li><strong>jstat:</strong> GC statistics</li>
                                <li><strong>jstack:</strong> Thread dump</li>
                                <li><strong>JFR:</strong> Java Flight Recorder (production profiling)</li>
                                <li><strong>Tools:</strong> VisualVM, Eclipse MAT, JProfiler</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <div class="page-navigation">
                <a href="multithreading.html" class="nav-btn prev"><i
                        class="fas fa-arrow-left"></i><span>Multithreading</span></a>
                <a href="java8-features.html" class="nav-btn next"><span>Java 8+ Features</span><i
                        class="fas fa-arrow-right"></i></a>
            </div>
        </article>
    </main>

    <button class="back-to-top" id="backToTop"><i class="fas fa-arrow-up"></i></button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="../js/main.js"></script>
</body>

</html>