<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collections Framework - Java Core Interview</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="bg-animation"></div>

    <nav class="top-nav">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo"><i class="fas fa-rocket"></i><span>Interview Hub</span></a>
            <a href="../index.html#java" class="nav-back"><i class="fas fa-arrow-left"></i> Java Core</a>
        </div>
    </nav>

    <header class="topic-header">
        <div class="topic-icon java"><i class="fas fa-layer-group"></i></div>
        <div class="topic-info">
            <span class="topic-category">Java Core</span>
            <h1>Collections Framework</h1>
            <p class="topic-desc">List, Set, Map, Queue v√† c√°c implementation ph·ªï bi·∫øn</p>
        </div>
    </header>

    <main class="content-container">
        <aside class="toc">
            <h3><i class="fas fa-list"></i> N·ªôi dung</h3>
            <ul>
                <li><a href="#hierarchy">Collection Hierarchy</a></li>
                <li><a href="#list">List Interface</a></li>
                <li><a href="#set">Set Interface</a></li>
                <li><a href="#map">Map Interface</a></li>
                <li><a href="#queue">Queue & Deque</a></li>
                <li><a href="#concurrent">Concurrent Collections</a></li>
                <li><a href="#comparison">Comparable vs Comparator</a></li>
                <li><a href="#iterator">Iterator & Fail-Fast</a></li>
                <li><a href="#utilities">Collections Utilities</a></li>
                <li><a href="#interview">C√¢u h·ªèi ph·ªèng v·∫•n</a></li>
            </ul>
        </aside>

        <article class="main-content">
            <!-- COLLECTION HIERARCHY -->
            <section class="content-section">
                <h2 id="hierarchy" class="section-title"><span class="section-icon">üóÇÔ∏è</span>Collection Hierarchy</h2>

                <div class="concept-card">
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Hierarchy</span></div>
                            <pre><code>                    Iterable
                        ‚îÇ
                   Collection                         Map (separate)
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
        List       Set       Queue            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ          ‚îÇ          ‚îÇ           HashMap   TreeMap  LinkedHashMap
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
ArrayList ‚îÇ  Vector ‚îÇ  PriorityQueue Deque  ConcurrentHashMap
      LinkedList    ‚îÇ              ‚îÇ
               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ArrayDeque
            HashSet ‚îÇ  TreeSet   LinkedList
                    ‚îÇ
              LinkedHashSet

Note: Map kh√¥ng extends Collection!</code></pre>
                        </div>

                        <div class="key-points">
                            <h4><i class="fas fa-key"></i> ƒê·∫∑c ƒëi·ªÉm ch√≠nh c·ªßa t·ª´ng lo·∫°i</h4>
                            <ul>
                                <li><strong>List:</strong> C√≥ th·ª© t·ª±, cho ph√©p duplicate, truy c·∫≠p theo index</li>
                                <li><strong>Set:</strong> Kh√¥ng duplicate, c√≥ th·ªÉ c√≥ ho·∫∑c kh√¥ng th·ª© t·ª±</li>
                                <li><strong>Queue:</strong> FIFO (First In First Out), x·ª≠ l√Ω theo th·ª© t·ª±</li>
                                <li><strong>Map:</strong> Key-value pairs, key kh√¥ng duplicate</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- LIST INTERFACE -->
            <section class="content-section">
                <h2 id="list" class="section-title"><span class="section-icon">üìã</span>List Interface</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>ArrayList vs LinkedList vs Vector</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>ArrayList</th>
                                        <th>LinkedList</th>
                                        <th>Vector</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>C·∫•u tr√∫c</strong></td>
                                        <td>Dynamic Array</td>
                                        <td>Doubly Linked List</td>
                                        <td>Dynamic Array</td>
                                    </tr>
                                    <tr>
                                        <td><strong>get(index)</strong></td>
                                        <td><strong>O(1)</strong> ‚úÖ</td>
                                        <td>O(n)</td>
                                        <td>O(1)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>add/remove (cu·ªëi)</strong></td>
                                        <td>O(1)*</td>
                                        <td><strong>O(1)</strong> ‚úÖ</td>
                                        <td>O(1)*</td>
                                    </tr>
                                    <tr>
                                        <td><strong>add/remove (gi·ªØa)</strong></td>
                                        <td>O(n)</td>
                                        <td><strong>O(1)</strong>**</td>
                                        <td>O(n)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Memory</strong></td>
                                        <td>√çt h∆°n</td>
                                        <td>Nhi·ªÅu h∆°n (node pointers)</td>
                                        <td>√çt h∆°n</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Thread-safe</strong></td>
                                        <td>‚ùå</td>
                                        <td>‚ùå</td>
                                        <td>‚úÖ (synchronized)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Growth</strong></td>
                                        <td>50% capacity</td>
                                        <td>N/A</td>
                                        <td>100% capacity</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="small">* Amortized O(1) | ** O(1) n·∫øu c√≥ reference ƒë·∫øn node</p>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">ArrayList Internal</span></div>
                            <pre><code class="language-java">// ArrayList s·ª≠ d·ª•ng array n·ªôi b·ªô
public class ArrayList&lt;E&gt; {
    private Object[] elementData;  // Underlying array
    private int size;
    
    // Default capacity = 10
    // Khi ƒë·∫ßy, grow th√™m 50%: newCapacity = oldCapacity + (oldCapacity >> 1)
}

// Best practices
List&lt;String&gt; list = new ArrayList&lt;&gt;();  // Interface type
List&lt;String&gt; sized = new ArrayList&lt;&gt;(1000);  // Bi·∫øt tr∆∞·ªõc size

// Tr√°nh boxed primitives cho s·ªë l∆∞·ª£ng l·ªõn
int[] primitives = new int[1000000];  // 4MB
List&lt;Integer&gt; boxed = new ArrayList&lt;&gt;();  // ~20MB (object overhead)</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">LinkedList l√† Deque</span></div>
                            <pre><code class="language-java">// LinkedList implements c·∫£ List v√† Deque
LinkedList&lt;String&gt; list = new LinkedList&lt;&gt;();

// List operations
list.add("A");
list.get(0);

// Deque operations (O(1))
list.addFirst("First");
list.addLast("Last");
list.removeFirst();
list.removeLast();
list.peekFirst();  // Kh√¥ng remove
list.pollFirst();  // Remove v√† return</code></pre>
                        </div>

                        <div class="info-box">
                            <h4><i class="fas fa-lightbulb"></i> Khi n√†o d√πng?</h4>
                            <ul>
                                <li><strong>ArrayList:</strong> 90% use cases - random access, iteration</li>
                                <li><strong>LinkedList:</strong> Th√™m/x√≥a ƒë·∫ßu/cu·ªëi nhi·ªÅu, implement Queue/Stack</li>
                                <li><strong>Vector:</strong> Legacy code, prefer CopyOnWriteArrayList</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SET INTERFACE -->
            <section class="content-section">
                <h2 id="set" class="section-title"><span class="section-icon">üîµ</span>Set Interface</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>HashSet vs TreeSet vs LinkedHashSet</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>HashSet</th>
                                        <th>TreeSet</th>
                                        <th>LinkedHashSet</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>C·∫•u tr√∫c</strong></td>
                                        <td>HashMap</td>
                                        <td>Red-Black Tree</td>
                                        <td>LinkedHashMap</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Th·ª© t·ª±</strong></td>
                                        <td>‚ùå Kh√¥ng</td>
                                        <td>‚úÖ Sorted</td>
                                        <td>‚úÖ Insertion order</td>
                                    </tr>
                                    <tr>
                                        <td><strong>add/remove/contains</strong></td>
                                        <td><strong>O(1)</strong></td>
                                        <td>O(log n)</td>
                                        <td>O(1)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>null</strong></td>
                                        <td>‚úÖ 1 null</td>
                                        <td>‚ùå NPE</td>
                                        <td>‚úÖ 1 null</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Thread-safe</strong></td>
                                        <td>‚ùå</td>
                                        <td>‚ùå</td>
                                        <td>‚ùå</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">HashSet
                                    ho·∫°t ƒë·ªông th·∫ø n√†o?</span></div>
                            <pre><code class="language-java">// HashSet d√πng HashMap internally
// Value lu√¥n l√† PRESENT (dummy object)
Set&lt;String&gt; set = new HashSet&lt;&gt;();
set.add("A");  // Th·ª±c ra l√† map.put("A", PRESENT)

// ƒê·ªÉ HashSet ho·∫°t ƒë·ªông ƒë√∫ng, class PH·∫¢I override:
public class Person {
    private String id;
    private String name;
    
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Person)) return false;
        Person person = (Person) o;
        return Objects.equals(id, person.id);
    }
    
    @Override
    public int hashCode() {
        return Objects.hash(id);  // Ph·∫£i consistent v·ªõi equals
    }
}

// Contract:
// if a.equals(b) == true ‚Üí a.hashCode() == b.hashCode() (b·∫Øt bu·ªôc)
// if a.hashCode() == b.hashCode() ‚Üí a.equals(b) c√≥ th·ªÉ false (collision)</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">TreeSet
                                    - Sorted Set</span></div>
                            <pre><code class="language-java">// TreeSet y√™u c·∫ßu elements Comparable ho·∫∑c Comparator
TreeSet&lt;Integer&gt; numbers = new TreeSet&lt;&gt;();
numbers.addAll(Arrays.asList(5, 2, 8, 1, 9));
System.out.println(numbers);  // [1, 2, 5, 8, 9] - sorted!

// NavigableSet methods
numbers.first();       // 1
numbers.last();        // 9
numbers.lower(5);      // 2 (strictly less than)
numbers.floor(5);      // 5 (less than or equal)
numbers.higher(5);     // 8 (strictly greater)
numbers.ceiling(5);    // 5 (greater than or equal)
numbers.headSet(5);    // [1, 2] - elements < 5
numbers.tailSet(5);    // [5, 8, 9] - elements >= 5
numbers.subSet(2, 8);  // [2, 5] - range [2, 8)</code></pre>
                        </div>

                        <div class="warning-box">
                            <h4><i class="fas fa-exclamation-triangle"></i> hashCode() Contract</h4>
                            <ul>
                                <li>N·∫øu <code>a.equals(b) == true</code> ‚Üí <code>a.hashCode() == b.hashCode()</code>
                                </li>
                                <li>N·∫øu hashCode kh√°c ‚Üí objects ch·∫Øc ch·∫Øn NOT equal</li>
                                <li>C√πng hashCode kh√¥ng c√≥ nghƒ©a equals (collision)</li>
                                <li>Ph·∫£i override C·∫¢ HAI ho·∫∑c KH√îNG override g√¨!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MAP INTERFACE -->
            <section class="content-section">
                <h2 id="map" class="section-title"><span class="section-icon">üó∫Ô∏è</span>Map Interface</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>HashMap Internal Working</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Visual</span><span
                                    class="code-title">HashMap Structure</span></div>
                            <pre><code>HashMap = Array of Node (bucket) + LinkedList/TreeMap

Index:  0    1    2    3    4    5    6    7   ...
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇnull‚îÇ N1 ‚îÇnull‚îÇ N2 ‚îÇnull‚îÇ N3 ‚îÇnull‚îÇ N4 ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÇ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÇ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÇ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÇ‚îÄ‚îò
              ‚îÇ         ‚îÇ         ‚îÇ         ‚îÇ
              ‚ñº         ‚ñº         ‚ñº         ‚ñº
             N1a      (...)     N3a      (TreeMap n·∫øu > 8)
              ‚îÇ                   ‚îÇ
              ‚ñº                   ‚ñº
             N1b                 N3b

Node: [hash | key | value | next]</code></pre>
                        </div>

                        <div class="key-points">
                            <h4><i class="fas fa-cogs"></i> HashMap ho·∫°t ƒë·ªông th·∫ø n√†o?</h4>
                            <ul>
                                <li><strong>Default capacity:</strong> 16, Load factor: 0.75</li>
                                <li><strong>Resize:</strong> Khi size > capacity √ó loadFactor ‚Üí double capacity</li>
                                <li><strong>Index:</strong> <code>hash & (capacity - 1)</code> (gi·ªëng hash % capacity
                                    nh∆∞ng nhanh h∆°n)</li>
                                <li><strong>Java 8+:</strong> LinkedList ‚Üí TreeMap khi bucket > 8 elements
                                    (TREEIFY_THRESHOLD)</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">HashMap
                                    put() Process</span></div>
                            <pre><code class="language-java">// Khi g·ªçi map.put(key, value):

// 1. T√≠nh hash (Java 8+ spread bits)
int hash = (key == null) ? 0 : key.hashCode() ^ (key.hashCode() >>> 16);

// 2. T√¨m bucket index
int index = hash & (capacity - 1);

// 3. N·∫øu bucket r·ªóng ‚Üí t·∫°o Node m·ªõi
// 4. N·∫øu bucket c√≥ nodes:
//    - Duy·ªát v√† check equals() v·ªõi m·ªói key
//    - N·∫øu t√¨m th·∫•y key ‚Üí update value
//    - N·∫øu kh√¥ng t√¨m th·∫•y ‚Üí th√™m v√†o cu·ªëi list
// 5. N·∫øu list > 8 ‚Üí chuy·ªÉn th√†nh TreeMap (O(n) ‚Üí O(log n))

// V√≠ d·ª• collision
Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();
map.put("Aa", 1);  // "Aa" v√† "BB" c√≥ c√πng hashCode!
map.put("BB", 2);  // C·∫£ hai v√†o c√πng bucket, d√πng equals() ph√¢n bi·ªát</code></pre>
                        </div>

                        <div class="comparison-table">
                            <h4>HashMap vs TreeMap vs LinkedHashMap</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>HashMap</th>
                                        <th>TreeMap</th>
                                        <th>LinkedHashMap</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Th·ª© t·ª±</strong></td>
                                        <td>‚ùå Kh√¥ng</td>
                                        <td>Key sorted</td>
                                        <td>Insertion/Access order</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Complexity</strong></td>
                                        <td>O(1)</td>
                                        <td>O(log n)</td>
                                        <td>O(1)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>null key</strong></td>
                                        <td>‚úÖ 1</td>
                                        <td>‚ùå NPE</td>
                                        <td>‚úÖ 1</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Use case</strong></td>
                                        <td>General purpose</td>
                                        <td>Sorted keys</td>
                                        <td>LRU Cache</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">LinkedHashMap cho LRU Cache</span></div>
                            <pre><code class="language-java">// LRU Cache v·ªõi LinkedHashMap
class LRUCache&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt; {
    private final int maxSize;
    
    public LRUCache(int maxSize) {
        // accessOrder = true ‚Üí move accessed entry to end
        super(maxSize, 0.75f, true);
        this.maxSize = maxSize;
    }
    
    @Override
    protected boolean removeEldestEntry(Map.Entry&lt;K, V&gt; eldest) {
        return size() > maxSize;  // Auto-remove oldest when full
    }
}

LRUCache&lt;String, Integer&gt; cache = new LRUCache&lt;&gt;(3);
cache.put("A", 1);
cache.put("B", 2);
cache.put("C", 3);
cache.get("A");      // Access A ‚Üí move to end
cache.put("D", 4);   // B b·ªã remove (oldest kh√¥ng ƒë∆∞·ª£c access)</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- QUEUE & DEQUE -->
            <section class="content-section">
                <h2 id="queue" class="section-title"><span class="section-icon">üì•</span>Queue & Deque</h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>Queue Interface</h3>
                        <span class="badge important">Important</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <h4>Queue Methods</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Operation</th>
                                        <th>Throws Exception</th>
                                        <th>Returns null/false</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Insert</strong></td>
                                        <td>add(e)</td>
                                        <td>offer(e)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Remove</strong></td>
                                        <td>remove()</td>
                                        <td>poll()</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Examine</strong></td>
                                        <td>element()</td>
                                        <td>peek()</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Queue
                                    Implementations</span></div>
                            <pre><code class="language-java">// 1. LinkedList - General purpose Queue/Deque
Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();
queue.offer("A");
queue.offer("B");
queue.poll();  // "A" (FIFO)

// 2. PriorityQueue - Min-heap by default
PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;();
pq.offer(5);
pq.offer(1);
pq.offer(3);
pq.poll();  // 1 (smallest first)

// Max-heap
PriorityQueue&lt;Integer&gt; maxPq = new PriorityQueue&lt;&gt;(Comparator.reverseOrder());

// Custom priority
PriorityQueue&lt;Task&gt; taskQueue = new PriorityQueue&lt;&gt;(
    Comparator.comparing(Task::getPriority)
);

// 3. ArrayDeque - Stack/Queue cho single thread
Deque&lt;String&gt; deque = new ArrayDeque&lt;&gt;();
// D√πng nh∆∞ Stack
deque.push("A");
deque.pop();
// D√πng nh∆∞ Queue
deque.offerLast("A");
deque.pollFirst();</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Deque
                                    Interface</span></div>
                            <pre><code class="language-java">// Deque = Double Ended Queue
Deque&lt;String&gt; deque = new ArrayDeque&lt;&gt;();

// First (Head) operations
deque.addFirst("A");     // Throws exception if full
deque.offerFirst("B");   // Returns false if full
deque.removeFirst();     // Throws NoSuchElementException if empty
deque.pollFirst();       // Returns null if empty
deque.getFirst();        // Throws exception
deque.peekFirst();       // Returns null

// Last (Tail) operations  
deque.addLast("C");
deque.offerLast("D");
deque.removeLast();
deque.pollLast();

// Stack operations
deque.push("E");   // = addFirst
deque.pop();       // = removeFirst
deque.peek();      // = peekFirst

// ‚ö†Ô∏è ArrayDeque nhanh h∆°n Stack v√† LinkedList cho Stack/Queue operations</code></pre>
                        </div>

                        <div class="info-box">
                            <h4><i class="fas fa-lightbulb"></i> Khi n√†o d√πng Queue n√†o?</h4>
                            <ul>
                                <li><strong>LinkedList:</strong> Queue ƒë∆°n gi·∫£n, c·∫ßn List operations</li>
                                <li><strong>ArrayDeque:</strong> Stack ho·∫∑c Queue nhanh (single thread)</li>
                                <li><strong>PriorityQueue:</strong> C·∫ßn x·ª≠ l√Ω theo priority</li>
                                <li><strong>BlockingQueue:</strong> Producer-Consumer pattern (multi-thread)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CONCURRENT COLLECTIONS -->
            <section class="content-section">
                <h2 id="concurrent" class="section-title"><span class="section-icon">üîí</span>Concurrent Collections
                </h2>

                <div class="concept-card">
                    <div class="concept-header">
                        <h3>ConcurrentHashMap</h3>
                        <span class="badge essential">Essential</span>
                    </div>
                    <div class="concept-content">
                        <div class="comparison-table">
                            <h4>So s√°nh Thread-safe Maps</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>ConcurrentHashMap</th>
                                        <th>Hashtable</th>
                                        <th>SynchronizedMap</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Lock</strong></td>
                                        <td>Segment/Bucket level</td>
                                        <td>To√†n b·ªô map</td>
                                        <td>To√†n b·ªô map</td>
                                    </tr>
                                    <tr>
                                        <td><strong>null key/value</strong></td>
                                        <td>‚ùå Kh√¥ng cho ph√©p</td>
                                        <td>‚ùå</td>
                                        <td>‚úÖ</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Performance</strong></td>
                                        <td>T·ªët nh·∫•t</td>
                                        <td>K√©m</td>
                                        <td>K√©m</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Iterator</strong></td>
                                        <td>Fail-safe (weakly consistent)</td>
                                        <td>Fail-fast</td>
                                        <td>Fail-fast</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">ConcurrentHashMap Atomic Operations</span></div>
                            <pre><code class="language-java">ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();

// Atomic operations - KH√îNG c·∫ßn synchronized block
map.putIfAbsent("key", 1);              // Ch·ªâ put n·∫øu ch∆∞a c√≥
map.computeIfAbsent("key", k -> expensiveCompute(k));  // Lazy compute
map.computeIfPresent("key", (k, v) -> v + 1);  // Update n·∫øu c√≥
map.merge("key", 1, Integer::sum);      // Insert ho·∫∑c update

// Safe iteration - kh√¥ng throw ConcurrentModificationException
for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {
    map.remove(entry.getKey());  // OK! Weakly consistent
}

// Bulk operations (Java 8+)
map.forEach((k, v) -> System.out.println(k + ": " + v));
map.reduce(1, (k, v) -> v, Integer::sum);
map.search(1, (k, v) -> v > 100 ? k : null);</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Other
                                    Concurrent Collections</span></div>
                            <pre><code class="language-java">// CopyOnWriteArrayList - Thread-safe, copy on write
List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;();
// T·ªët cho: nhi·ªÅu read, √≠t write
// Costly: m·ªói write copy to√†n b·ªô array

// BlockingQueue - Producer-Consumer pattern
BlockingQueue&lt;String&gt; queue = new LinkedBlockingQueue&lt;&gt;(100);
// Producer
queue.put("item");  // Blocks if full
// Consumer  
String item = queue.take();  // Blocks if empty

// ConcurrentLinkedQueue - Non-blocking, lock-free
Queue&lt;String&gt; lockFree = new ConcurrentLinkedQueue&lt;&gt;();

// ConcurrentSkipListMap - Concurrent sorted map
ConcurrentNavigableMap&lt;String, Integer&gt; sorted = new ConcurrentSkipListMap&lt;&gt;();</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPARABLE VS COMPARATOR -->
            <section class="content-section">
                <h2 id="comparison" class="section-title"><span class="section-icon">‚öñÔ∏è</span>Comparable vs Comparator
                </h2>

                <div class="concept-card">
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Feature</th>
                                        <th>Comparable</th>
                                        <th>Comparator</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Package</strong></td>
                                        <td>java.lang</td>
                                        <td>java.util</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Method</strong></td>
                                        <td>compareTo(T o)</td>
                                        <td>compare(T o1, T o2)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Sorting logic</strong></td>
                                        <td>Trong class (natural order)</td>
                                        <td>Ngo√†i class (custom)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>S·ªë c√°ch sort</strong></td>
                                        <td>1 c√°ch duy nh·∫•t</td>
                                        <td>Nhi·ªÅu c√°ch</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Modify class</strong></td>
                                        <td>C√≥</td>
                                        <td>Kh√¥ng</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">Comparable - Natural Ordering</span></div>
                            <pre><code class="language-java">public class Person implements Comparable&lt;Person&gt; {
    private String name;
    private int age;
    
    @Override
    public int compareTo(Person other) {
        // negative: this < other
        // zero: this == other
        // positive: this > other
        return this.name.compareTo(other.name);  // Natural order by name
    }
}

List&lt;Person&gt; people = Arrays.asList(p1, p2, p3);
Collections.sort(people);  // D√πng natural order</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">Comparator - Custom Ordering</span></div>
                            <pre><code class="language-java">// Lambda
Comparator&lt;Person&gt; byAge = (p1, p2) -> p1.getAge() - p2.getAge();

// Method reference (preferred)
Comparator&lt;Person&gt; byName = Comparator.comparing(Person::getName);
Comparator&lt;Person&gt; byAgeDesc = Comparator.comparing(Person::getAge).reversed();

// Chaining - multiple fields
Comparator&lt;Person&gt; byAgeAndName = Comparator
    .comparing(Person::getAge)
    .thenComparing(Person::getName);

// Null handling
Comparator&lt;Person&gt; nullSafeByName = Comparator
    .comparing(Person::getName, Comparator.nullsLast(Comparator.naturalOrder()));

// Usage
Collections.sort(people, byAge);
people.sort(byAgeAndName);
list.stream().sorted(byName).collect(Collectors.toList());</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ITERATOR & FAIL-FAST -->
            <section class="content-section">
                <h2 id="iterator" class="section-title"><span class="section-icon">üîÑ</span>Iterator &
                    Fail-Fast/Fail-Safe</h2>

                <div class="concept-card">
                    <div class="concept-content">
                        <div class="comparison-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Fail-Fast</th>
                                        <th>Fail-Safe</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Behavior</strong></td>
                                        <td>Throws ConcurrentModificationException</td>
                                        <td>Kh√¥ng exception</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Works on</strong></td>
                                        <td>Original collection</td>
                                        <td>Clone/Copy</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Memory</strong></td>
                                        <td>Kh√¥ng extra</td>
                                        <td>Extra cho copy</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Examples</strong></td>
                                        <td>ArrayList, HashMap</td>
                                        <td>ConcurrentHashMap, CopyOnWriteArrayList</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span class="code-title">Safe
                                    Removal During Iteration</span></div>
                            <pre><code class="language-java">List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList("A", "B", "C"));

// ‚ùå WRONG - ConcurrentModificationException
for (String s : list) {
    if (s.equals("B")) list.remove(s);
}

// ‚úÖ CORRECT - Iterator.remove()
Iterator&lt;String&gt; it = list.iterator();
while (it.hasNext()) {
    if (it.next().equals("B")) {
        it.remove();  // Safe removal
    }
}

// ‚úÖ CORRECT - removeIf() (Java 8+)
list.removeIf(s -> s.equals("B"));

// ‚úÖ CORRECT - Collect to new list
List&lt;String&gt; filtered = list.stream()
    .filter(s -> !s.equals("B"))
    .collect(Collectors.toList());

// ‚úÖ CORRECT - Backward loop (for index-based)
for (int i = list.size() - 1; i >= 0; i--) {
    if (list.get(i).equals("B")) list.remove(i);
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COLLECTIONS UTILITIES -->
            <section class="content-section">
                <h2 id="utilities" class="section-title"><span class="section-icon">üõ†Ô∏è</span>Collections Utilities</h2>

                <div class="concept-card">
                    <div class="concept-content">
                        <div class="code-block">
                            <div class="code-header"><span class="code-lang">Java</span><span
                                    class="code-title">Collections Utility Methods</span></div>
                            <pre><code class="language-java">// Sorting
Collections.sort(list);
Collections.sort(list, comparator);
Collections.reverse(list);
Collections.shuffle(list);

// Searching
int index = Collections.binarySearch(sortedList, key);  // List ph·∫£i sorted

// Min/Max
Collections.min(list);
Collections.max(list, comparator);

// Frequency
int count = Collections.frequency(list, element);

// Fill/Replace
Collections.fill(list, value);
Collections.replaceAll(list, oldVal, newVal);

// Rotate/Swap
Collections.rotate(list, distance);
Collections.swap(list, i, j);

// Immutable wrappers
List&lt;String&gt; unmodifiable = Collections.unmodifiableList(list);
Set&lt;String&gt; immutableSet = Set.of("A", "B", "C");  // Java 9+
List&lt;String&gt; immutableList = List.of("A", "B");    // Java 9+
Map&lt;String, Integer&gt; immutableMap = Map.of("A", 1, "B", 2);  // Java 9+

// Synchronized wrappers
List&lt;String&gt; synced = Collections.synchronizedList(new ArrayList&lt;&gt;());
Map&lt;String, Integer&gt; syncedMap = Collections.synchronizedMap(new HashMap&lt;&gt;());

// Empty/Singleton
List&lt;String&gt; empty = Collections.emptyList();
Set&lt;String&gt; singleton = Collections.singleton("A");

// nCopies
List&lt;String&gt; copies = Collections.nCopies(5, "default");</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INTERVIEW QUESTIONS -->
            <section id="interview" class="content-section">
                <h2 class="section-title"><span class="section-icon">üíº</span>C√¢u H·ªèi Ph·ªèng V·∫•n</h2>

                <div class="interview-questions">
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q1</span>
                            <p>HashMap x·ª≠ l√Ω collision nh∆∞ th·∫ø n√†o?</p>
                        </div>
                        <div class="answer">
                            <p>D√πng <strong>chaining</strong>. Java 8+: LinkedList cho ‚â§8 elements, chuy·ªÉn th√†nh TreeMap
                                khi >8 (TREEIFY_THRESHOLD). C·∫£i thi·ªán worst case t·ª´ O(n) th√†nh O(log n).</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q2</span>
                            <p>T·∫°i sao ConcurrentHashMap t·ªët h∆°n Hashtable?</p>
                        </div>
                        <div class="answer">
                            <p>ConcurrentHashMap d√πng <strong>segment-level/bucket-level locking</strong>, cho ph√©p
                                concurrent reads v√† limited concurrent writes. Hashtable lock to√†n b·ªô map cho m·ªói
                                operation.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q3</span>
                            <p>Kh√°c bi·ªát HashMap v√† TreeMap?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>HashMap:</strong> O(1) lookup, kh√¥ng th·ª© t·ª±, cho ph√©p 1 null key</li>
                                <li><strong>TreeMap:</strong> O(log n) lookup, sorted by keys, KH√îNG cho null key,
                                    implements NavigableMap</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q4</span>
                            <p>Khi n√†o d√πng LinkedHashMap?</p>
                        </div>
                        <div class="answer">
                            <p>Khi c·∫ßn <strong>insertion order</strong> ho·∫∑c <strong>access order</strong> (cho LRU
                                cache). Override <code>removeEldestEntry()</code> ƒë·ªÉ t·ª± ƒë·ªông x√≥a entry c≈© nh·∫•t.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q5</span>
                            <p>N·∫øu 2 keys c√≥ c√πng hashCode th√¨ sao?</p>
                        </div>
                        <div class="answer">
                            <p>Ch√∫ng v√†o <strong>c√πng bucket</strong>. HashMap d√πng <code>equals()</code> ƒë·ªÉ x√°c ƒë·ªãnh c√≥
                                ph·∫£i c√πng key kh√¥ng. N·∫øu kh√¥ng, c·∫£ hai ƒë·ªÅu ƒë∆∞·ª£c l∆∞u (collision handling).</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q6</span>
                            <p>Fail-fast vs Fail-safe iterator?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>Fail-fast:</strong> Throws ConcurrentModificationException khi collection b·ªã
                                    modify trong khi iterate (ArrayList, HashMap)</li>
                                <li><strong>Fail-safe:</strong> Kh√¥ng throw exception, iterate tr√™n copy
                                    (ConcurrentHashMap)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q7</span>
                            <p>ArrayList vs LinkedList - khi n√†o d√πng c√°i n√†o?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><strong>ArrayList:</strong> 90% cases - random access, iteration, get by index</li>
                                <li><strong>LinkedList:</strong> Th√™m/x√≥a ƒë·∫ßu/cu·ªëi th∆∞·ªùng xuy√™n, implement Queue/Deque
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q8</span>
                            <p>T·∫°i sao ph·∫£i override c·∫£ equals() v√† hashCode()?</p>
                        </div>
                        <div class="answer">
                            <p>HashMap/HashSet d√πng hashCode ƒë·ªÉ t√¨m bucket, r·ªìi equals ƒë·ªÉ t√¨m element trong bucket. N·∫øu
                                override equals m√† kh√¥ng override hashCode, 2 object "equal" c√≥ th·ªÉ v√†o kh√°c bucket ‚Üí
                                kh√¥ng t√¨m th·∫•y nhau.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q9</span>
                            <p>PriorityQueue ho·∫°t ƒë·ªông th·∫ø n√†o?</p>
                        </div>
                        <div class="answer">
                            <p>D√πng <strong>min-heap</strong> (binary heap). Element nh·ªè nh·∫•t ·ªü root. offer/poll l√†
                                O(log n), peek l√† O(1). D√πng Comparator.reverseOrder() cho max-heap.</p>
                        </div>
                    </div>
                    <div class="question-card">
                        <div class="question"><span class="q-number">Q10</span>
                            <p>Immutable collections trong Java 9+?</p>
                        </div>
                        <div class="answer">
                            <ul>
                                <li><code>List.of("A", "B")</code> - Immutable list</li>
                                <li><code>Set.of("A", "B")</code> - Immutable set</li>
                                <li><code>Map.of("k1", "v1")</code> - Immutable map</li>
                            </ul>
                            <p>Kh√¥ng cho null, kh√¥ng cho duplicate (Set/Map key). Throws UnsupportedOperationException
                                khi modify.</p>
                        </div>
                    </div>
                </div>
            </section>

            <div class="page-navigation">
                <a href="oop-principles.html" class="nav-btn prev"><i class="fas fa-arrow-left"></i><span>OOP
                        Principles</span></a>
                <a href="multithreading.html" class="nav-btn next"><span>Multithreading</span><i
                        class="fas fa-arrow-right"></i></a>
            </div>
        </article>
    </main>

    <button class="back-to-top" id="backToTop"><i class="fas fa-arrow-up"></i></button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="../js/main.js"></script>
</body>

</html>